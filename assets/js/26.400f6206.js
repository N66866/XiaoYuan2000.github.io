(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{306:function(s,a,t){"use strict";t.r(a);var n=t(14),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"shardingsphere"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shardingsphere"}},[s._v("#")]),s._v(" shardingsphere")]),s._v(" "),a("h2",{attrs:{id:"springboot-配置问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#springboot-配置问题"}},[s._v("#")]),s._v(" springboot 配置问题")]),s._v(" "),a("p",[s._v("在使用springboot + shardingsphere时，配置文件如下")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# application.yml")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("datasource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ShardingSphere 对 Driver 自定义，实现分库分表等隐藏逻辑")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("driver-class-name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" org.apache.shardingsphere.driver.ShardingSphereDriver\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ShardingSphere 配置文件路径")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" jdbc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("shardingsphere"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("classpath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("shardingsphere"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("config.yaml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("然后启动项目，就会报错找不到文件（因为想使用外部文件，打的jar包里确实没有这个文件），但是根据众所周知的springboot配置文件加载顺序，会读取外部的"),a("code",[s._v("config")]),s._v("目录，然后"),a("code",[s._v("jar")]),s._v("包的同目录，再到"),a("code",[s._v("classpath")]),s._v("里的目录(简述，需要更详细的顺序可以百度一下)。"),a("br"),s._v("\n我这个shardingsphere-config.yaml已经放在了config目录下，但是就是报错读取不到。困惑了一两个小时百度 Google找不到答案。")]),s._v(" "),a("ol",[a("li",[s._v("尝试过将配置改为")])]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("datasource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ShardingSphere 对 Driver 自定义，实现分库分表等隐藏逻辑")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("driver-class-name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" org.apache.shardingsphere.driver.ShardingSphereDriver\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ShardingSphere 配置文件路径")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" jdbc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("shardingsphere"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/usr/shortlink/admin/config/shardingsphere"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("config.yaml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("尝试过将配置改为")])]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("datasource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ShardingSphere 对 Driver 自定义，实现分库分表等隐藏逻辑")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("driver-class-name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" org.apache.shardingsphere.driver.ShardingSphereDriver\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ShardingSphere 配置文件路径")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" jdbc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("shardingsphere"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("classpath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("config/shardingsphere"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("config.yaml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("hr"),s._v(" "),a("ul",[a("li",[s._v("最终，还是去看shardingsphere官方文档，找到解决方案如下："),a("br"),s._v(" "),a("a",{attrs:{href:"http://s.xiaoyuan.space/17Fmc9",target:"_blank",rel:"noopener noreferrer"}},[s._v("shardingsphere"),a("OutboundLink")],1)])]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("datasource")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ShardingSphere 对 Driver 自定义，实现分库分表等隐藏逻辑")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("driver-class-name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" org.apache.shardingsphere.driver.ShardingSphereDriver\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ShardingSphere 配置文件路径")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" jdbc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("shardingsphere"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("absolutepath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/usr/shortlink/admin/config/shardingsphere"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("config.yaml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("将 classpath 改为 absolutepath即可")])])}),[],!1,null,null,null);a.default=e.exports}}]);