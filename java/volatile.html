<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>volatile | NULLå­¦ä¹ ç¬”è®°</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="åˆ†äº«å„ç±»èµ„æºã€æ•™ç¨‹ã€å·¥å…·ç­‰ç­‰">
    
    <link rel="preload" href="/assets/css/0.styles.1d50d329.css" as="style"><link rel="preload" href="/assets/js/app.2bce7a50.js" as="script"><link rel="preload" href="/assets/js/2.d4767806.js" as="script"><link rel="preload" href="/assets/js/1.98e67d61.js" as="script"><link rel="preload" href="/assets/js/43.77fec41a.js" as="script"><link rel="prefetch" href="/assets/js/10.bf9c2272.js"><link rel="prefetch" href="/assets/js/11.3e761738.js"><link rel="prefetch" href="/assets/js/12.25cb2e41.js"><link rel="prefetch" href="/assets/js/13.8696a8fa.js"><link rel="prefetch" href="/assets/js/14.6f479bb1.js"><link rel="prefetch" href="/assets/js/15.33db6b39.js"><link rel="prefetch" href="/assets/js/16.3689a3a5.js"><link rel="prefetch" href="/assets/js/17.ef4d8cc7.js"><link rel="prefetch" href="/assets/js/18.3256f17f.js"><link rel="prefetch" href="/assets/js/19.a45744ea.js"><link rel="prefetch" href="/assets/js/20.e4646aa0.js"><link rel="prefetch" href="/assets/js/21.388c94d1.js"><link rel="prefetch" href="/assets/js/22.dd250251.js"><link rel="prefetch" href="/assets/js/23.b02fd718.js"><link rel="prefetch" href="/assets/js/24.1f0e8e31.js"><link rel="prefetch" href="/assets/js/25.ccec2f13.js"><link rel="prefetch" href="/assets/js/26.4a2af455.js"><link rel="prefetch" href="/assets/js/27.cea6c22e.js"><link rel="prefetch" href="/assets/js/28.2266baa8.js"><link rel="prefetch" href="/assets/js/29.b042a7b5.js"><link rel="prefetch" href="/assets/js/3.c33b3aaa.js"><link rel="prefetch" href="/assets/js/30.0ae63275.js"><link rel="prefetch" href="/assets/js/31.9cf817b6.js"><link rel="prefetch" href="/assets/js/32.25b2dbf5.js"><link rel="prefetch" href="/assets/js/33.3d407d80.js"><link rel="prefetch" href="/assets/js/34.2851b38f.js"><link rel="prefetch" href="/assets/js/35.1eb9e3b6.js"><link rel="prefetch" href="/assets/js/36.3d522c17.js"><link rel="prefetch" href="/assets/js/37.ed332781.js"><link rel="prefetch" href="/assets/js/38.84d4d706.js"><link rel="prefetch" href="/assets/js/39.b34bed61.js"><link rel="prefetch" href="/assets/js/4.45665f8a.js"><link rel="prefetch" href="/assets/js/40.10d69ce0.js"><link rel="prefetch" href="/assets/js/41.3d871235.js"><link rel="prefetch" href="/assets/js/42.e34f6f20.js"><link rel="prefetch" href="/assets/js/44.aa13feb4.js"><link rel="prefetch" href="/assets/js/45.6ae8a925.js"><link rel="prefetch" href="/assets/js/46.55efa901.js"><link rel="prefetch" href="/assets/js/47.576e49ab.js"><link rel="prefetch" href="/assets/js/48.40771f40.js"><link rel="prefetch" href="/assets/js/49.24fb72e5.js"><link rel="prefetch" href="/assets/js/5.b31b942f.js"><link rel="prefetch" href="/assets/js/50.8c877377.js"><link rel="prefetch" href="/assets/js/51.61aeec3b.js"><link rel="prefetch" href="/assets/js/52.12dfb0d7.js"><link rel="prefetch" href="/assets/js/53.bdb2067d.js"><link rel="prefetch" href="/assets/js/54.8f5eadd1.js"><link rel="prefetch" href="/assets/js/6.4910e764.js"><link rel="prefetch" href="/assets/js/7.c5640ac7.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5e19b665.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1d50d329.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">NULLå­¦ä¹ ç¬”è®°</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://xiaoyuan.space" target="_blank" rel="noopener noreferrer" class="nav-link external">
  NULLä¸»é¡µ
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å­¦ä¹ ç¬”è®°" class="dropdown-title"><span class="title">å­¦ä¹ ç¬”è®°</span> <span class="arrow down"></span></button> <button type="button" aria-label="å­¦ä¹ ç¬”è®°" class="mobile-dropdown-title"><span class="title">å­¦ä¹ ç¬”è®°</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/" class="nav-link router-link-active">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/spring/" class="nav-link">
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/git/" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/practice/" class="nav-link">
  æŠ€æœ¯å®è·µ
</a></li><li class="dropdown-item"><!----> <a href="/cannot-understand/" class="nav-link">
  å¥‡éš¾æ‚ç—‡
</a></li><li class="dropdown-item"><!----> <a href="/middleware/" class="nav-link">
  ä¸­é—´ä»¶å­¦ä¹ 
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å·²å‘å¸ƒé¡¹ç›®" class="dropdown-title"><span class="title">å·²å‘å¸ƒé¡¹ç›®</span> <span class="arrow down"></span></button> <button type="button" aria-label="å·²å‘å¸ƒé¡¹ç›®" class="mobile-dropdown-title"><span class="title">å·²å‘å¸ƒé¡¹ç›®</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://short-link.xiaoyuan.space" target="_blank" rel="noopener noreferrer" class="nav-link external">
  SaaSçŸ­é“¾æ¥
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://xiaoyuan.space" target="_blank" rel="noopener noreferrer" class="nav-link external">
  NULLä¸»é¡µ
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å­¦ä¹ ç¬”è®°" class="dropdown-title"><span class="title">å­¦ä¹ ç¬”è®°</span> <span class="arrow down"></span></button> <button type="button" aria-label="å­¦ä¹ ç¬”è®°" class="mobile-dropdown-title"><span class="title">å­¦ä¹ ç¬”è®°</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/" class="nav-link router-link-active">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/spring/" class="nav-link">
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/git/" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/practice/" class="nav-link">
  æŠ€æœ¯å®è·µ
</a></li><li class="dropdown-item"><!----> <a href="/cannot-understand/" class="nav-link">
  å¥‡éš¾æ‚ç—‡
</a></li><li class="dropdown-item"><!----> <a href="/middleware/" class="nav-link">
  ä¸­é—´ä»¶å­¦ä¹ 
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å·²å‘å¸ƒé¡¹ç›®" class="dropdown-title"><span class="title">å·²å‘å¸ƒé¡¹ç›®</span> <span class="arrow down"></span></button> <button type="button" aria-label="å·²å‘å¸ƒé¡¹ç›®" class="mobile-dropdown-title"><span class="title">å·²å‘å¸ƒé¡¹ç›®</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://short-link.xiaoyuan.space" target="_blank" rel="noopener noreferrer" class="nav-link external">
  SaaSçŸ­é“¾æ¥
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Javaåº•å±‚</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Javaå¹¶å‘ç¼–ç¨‹</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java/proxy.html" class="sidebar-link">proxy</a></li><li><a href="/java/volatile.html" aria-current="page" class="active sidebar-link">volatile</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/volatile.html#å†…å­˜å¯è§æ€§" class="sidebar-link">å†…å­˜å¯è§æ€§</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/volatile.html#æ¡ˆä¾‹" class="sidebar-link">æ¡ˆä¾‹</a></li><li class="sidebar-sub-header"><a href="/java/volatile.html#volatileæ€ä¹ˆä¿è¯å†…å­˜å¯è§æ€§" class="sidebar-link">volatileæ€ä¹ˆä¿è¯å†…å­˜å¯è§æ€§</a></li><li class="sidebar-sub-header"><a href="/java/volatile.html#åç¼–è¯‘è§£è¯»å¯è§æ€§" class="sidebar-link">åç¼–è¯‘è§£è¯»å¯è§æ€§</a></li><li class="sidebar-sub-header"><a href="/java/volatile.html#ä¸åŠ volatileä¹Ÿå¯è§å—" class="sidebar-link">ä¸åŠ volatileä¹Ÿå¯è§å—</a></li><li class="sidebar-sub-header"><a href="/java/volatile.html#æ€»ç»“" class="sidebar-link">æ€»ç»“</a></li></ul></li><li class="sidebar-sub-header"><a href="/java/volatile.html#ç¦æ­¢æŒ‡ä»¤é‡æ’åº" class="sidebar-link">ç¦æ­¢æŒ‡ä»¤é‡æ’åº</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/volatile.html#æ¡ˆä¾‹-2" class="sidebar-link">æ¡ˆä¾‹</a></li><li class="sidebar-sub-header"><a href="/java/volatile.html#æ€»ç»“-2" class="sidebar-link">æ€»ç»“</a></li></ul></li></ul></li><li><a href="/java/synchronized.html" class="sidebar-link">synchronized</a></li><li><a href="/java/ReentrantLock.html" class="sidebar-link">ReentrantLock</a></li><li><a href="/java/AQS.html" class="sidebar-link">AbstractQueuedSynchronizer</a></li><li><a href="/java/AQS-Share.html" class="sidebar-link">AQS Share Lock</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Javaå¤šçº¿ç¨‹</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="volatile"><a href="#volatile" class="header-anchor">#</a> volatile</h1> <p>volatile æ˜¯ä¸€ç§å…³é”®å­—ï¼Œç”¨äºä¿è¯å¤šçº¿ç¨‹æƒ…å†µä¸‹å…±äº«å˜é‡çš„å¯è§æ€§ã€‚å½“ä¸€ä¸ªå˜é‡è¢«å£°æ˜ä¸º volatile æ—¶ï¼Œæ¯ä¸ªçº¿ç¨‹åœ¨è®¿é—®è¯¥å˜é‡æ—¶éƒ½ä¼šç«‹å³åˆ·æ–°å…¶æœ¬åœ°å†…å­˜ï¼ˆå·¥ä½œå†…å­˜ï¼‰ä¸­è¯¥å˜é‡çš„å€¼ï¼Œç¡®ä¿æ‰€æœ‰çº¿ç¨‹éƒ½èƒ½è¯»åˆ°æœ€æ–°çš„å€¼ã€‚å¹¶ä¸”ä½¿ç”¨ volatile å¯ä»¥ç¦æ­¢æŒ‡ä»¤é‡æ’åºï¼Œè¿™æ ·å°±èƒ½æœ‰æ•ˆçš„é¢„é˜²ï¼Œå› ä¸ºæŒ‡ä»¤ä¼˜åŒ–ï¼ˆé‡æ’åºï¼‰è€Œå¯¼è‡´çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚ä¹Ÿå°±æ˜¯è¯´ volatile æœ‰ä¸¤ä¸ªä¸»è¦åŠŸèƒ½ï¼š<strong>ä¿è¯å†…å­˜å¯è§æ€§</strong>å’Œ<strong>ç¦æ­¢æŒ‡ä»¤é‡æ’åº</strong>ã€‚</p> <h2 id="å†…å­˜å¯è§æ€§"><a href="#å†…å­˜å¯è§æ€§" class="header-anchor">#</a> å†…å­˜å¯è§æ€§</h2> <h3 id="æ¡ˆä¾‹"><a href="#æ¡ˆä¾‹" class="header-anchor">#</a> æ¡ˆä¾‹</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApiTest</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> <span class="token class-name">VT</span> vt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VT</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Thread</span> <span class="token class-name">Thread01</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>vt<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> <span class="token class-name">Thread02</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> ignore<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token punctuation">}</span>
                vt<span class="token punctuation">.</span>sign <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;vt.sign = true é€šçŸ¥ while (!sign) ç»“æŸï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Thread01</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread02</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">VT</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> sign <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>sign<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä½ å&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>è¿™æ®µä»£ç ï¼Œæ˜¯ä¸¤ä¸ªçº¿ç¨‹æ“ä½œä¸€ä¸ªå˜é‡ï¼Œç¨‹åºæœŸæœ›å½“ sign åœ¨çº¿ç¨‹ Thread01 è¢«æ“ä½œ vt.sign = true æ—¶ï¼ŒThread02 è¾“å‡º &quot;ä½ å&quot;ã€‚ä½†å®é™…ä¸Šè¿™æ®µä»£ç æ°¸è¿œä¸ä¼šè¾“å‡º ä½ åï¼Œè€Œæ˜¯ä¸€ç›´å¤„äºæ­»å¾ªç¯ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæ¥ä¸‹æ¥æˆ‘ä»¬å°±ä¸€æ­¥æ­¥è®²è§£å’ŒéªŒè¯ã€‚</p> <p><strong>åŠ ä¸Švolatileå…³é”®å­—</strong>
æˆ‘ä»¬æŠŠ sign å…³é”®å­—åŠ ä¸Š volatitle æè¿°ï¼Œå¦‚ä¸‹ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">VT</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">volatile</span> <span class="token keyword">boolean</span> sign <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>sign<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä½ å&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>æµ‹è¯•ç»“æœ</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>vt<span class="token punctuation">.</span>sign <span class="token operator">=</span> <span class="token boolean">true</span> é€šçŸ¥ <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>sign<span class="token punctuation">)</span> ç»“æŸï¼
ä½ å

<span class="token class-name">Process</span> finished <span class="token keyword">with</span> <span class="token namespace">exit</span> code <span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>volatileå…³é”®å­—æ˜¯Javaè™šæ‹Ÿæœºæä¾›çš„çš„æœ€è½»é‡çº§çš„åŒæ­¥æœºåˆ¶ï¼Œå®ƒä½œä¸ºä¸€ä¸ªä¿®é¥°ç¬¦å‡ºç°ï¼Œç”¨æ¥ä¿®é¥°å˜é‡ï¼Œä½†æ˜¯è¿™é‡Œä¸åŒ…æ‹¬å±€éƒ¨å˜é‡å“¦</p> <p>åœ¨æ·»åŠ  volatile å…³é”®å­—åï¼Œç¨‹åºå°±ç¬¦åˆé¢„æœŸçš„è¾“å‡ºäº† ä½ åã€‚ä»æˆ‘ä»¬å¯¹ volatile çš„å­¦ä¹ è®¤çŸ¥å¯ä»¥çŸ¥é“ã€‚volatileå…³é”®å­—æ˜¯ JVM æä¾›çš„æœ€è½»é‡çº§çš„åŒæ­¥æœºåˆ¶ï¼Œç”¨æ¥ä¿®é¥°å˜é‡ï¼Œç”¨æ¥ä¿è¯å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹å¯è§æ€§ã€‚</p> <p>æ­£åœ¨ä¿®é¥°åå¯ä»¥è®©å­—æ®µåœ¨çº¿ç¨‹é—´å¯è§ï¼Œé‚£ä¹ˆè¿™ä¸ªå±æ€§è¢«ä¿®æ”¹å€¼åï¼Œå¯ä»¥åŠæ—¶çš„åœ¨å¦å¤–çš„çº¿ç¨‹ä¸­åšå‡ºç›¸åº”çš„ååº”ã€‚</p> <hr> <h3 id="volatileæ€ä¹ˆä¿è¯å†…å­˜å¯è§æ€§"><a href="#volatileæ€ä¹ˆä¿è¯å†…å­˜å¯è§æ€§" class="header-anchor">#</a> volatileæ€ä¹ˆä¿è¯å†…å­˜å¯è§æ€§</h3> <h4 id="_1-æ— volatileæ—¶-å†…å­˜å˜åŒ–"><a href="#_1-æ— volatileæ—¶-å†…å­˜å˜åŒ–" class="header-anchor">#</a> 1. æ— volatileæ—¶ï¼Œå†…å­˜å˜åŒ–</h4> <p><img src="/java/volatile/interview-14-03.png" alt="pic">
é¦–å…ˆæ˜¯å½“ sign æ²¡æœ‰ volatile ä¿®é¥°æ—¶ public boolean sign = false;ï¼Œçº¿ç¨‹01å¯¹å˜é‡è¿›è¡Œæ“ä½œï¼Œçº¿ç¨‹02å¹¶ä¸ä¼šæ‹¿åˆ°å˜åŒ–çš„å€¼ã€‚æ‰€ä»¥ç¨‹åºä¹Ÿå°±ä¸ä¼šè¾“å‡ºç»“æœ â€œä½ åâ€</p> <h4 id="_2-æœ‰volatileæ—¶-å†…å­˜å˜åŒ–"><a href="#_2-æœ‰volatileæ—¶-å†…å­˜å˜åŒ–" class="header-anchor">#</a> 2. æœ‰volatileæ—¶ï¼Œå†…å­˜å˜åŒ–</h4> <p><img src="/java/volatile/interview-14-04.png" alt="pic">
å½“æˆ‘ä»¬æŠŠå˜é‡ä½¿ç”¨ volatile ä¿®é¥°æ—¶ public volatile boolean sign = false;ï¼Œçº¿ç¨‹01å¯¹å˜é‡è¿›è¡Œæ“ä½œæ—¶ï¼Œä¼šæŠŠå˜é‡å˜åŒ–çš„å€¼å¼ºåˆ¶åˆ·æ–°çš„åˆ°ä¸»å†…å­˜ã€‚å½“çº¿ç¨‹02è·å–å€¼æ—¶ï¼Œä¼šæŠŠè‡ªå·±çš„å†…å­˜é‡Œçš„ sign å€¼è¿‡æœŸæ‰ï¼Œä¹‹åä»ä¸»å†…å­˜ä¸­è¯»å–ã€‚æ‰€ä»¥æ·»åŠ å…³é”®å­—åç¨‹åºå¦‚é¢„æœŸè¾“å‡ºç»“æœã€‚</p> <h4 id="_3-ç‰¹æ®Šæƒ…å†µ"><a href="#_3-ç‰¹æ®Šæƒ…å†µ" class="header-anchor">#</a> 3. ç‰¹æ®Šæƒ…å†µ</h4> <blockquote><ol><li>System.out.printlnæ–¹æ³•ä¸­ï¼ŒåŠ äº†synchronizedå…³é”®å­—ï¼Œæ‰€ä»¥ä¼šä¿æŒå†…å­˜å¯è§æ€§(å…³äºsynchronizedçš„çŸ¥è¯†ç‚¹å¯ä»¥<a href="/java/synchronized.html#synchronized-ç‰¹æ€§">ç‚¹æ­¤</a>)ã€‚æ›´è¯¦ç»†çš„è§£é‡Šçœ‹ä¸‹æ–‡ã€‚</li> <li>åœ¨Javaä¸­ï¼Œå½“å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å…±äº«å˜é‡æ—¶ï¼Œç”±äºçº¿ç¨‹çš„æœ¬åœ°ç¼“å­˜ï¼ˆå·¥ä½œå†…å­˜ï¼‰å’Œä¸»å†…å­˜ä¹‹é—´çš„ä¸ä¸€è‡´æ€§ï¼Œå¯èƒ½å¯¼è‡´ä¸€ä¸ªçº¿ç¨‹åœ¨è¯»å–å…±äº«å˜é‡æ—¶çœ‹åˆ°çš„æ˜¯è¿‡æœŸçš„å€¼ã€‚è¿™æ˜¯å› ä¸ºåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œä¸ºäº†æé«˜æ‰§è¡Œæ•ˆç‡ï¼ŒJVMå’Œå¤„ç†å™¨ä¼šå¯¹æŒ‡ä»¤è¿›è¡Œé‡æ’åºå’Œä¼˜åŒ–ï¼Œå¹¶ä¸”çº¿ç¨‹ä¹‹é—´çš„æ“ä½œå¯èƒ½ä»¥ä¸åŒçš„é¡ºåºæ‰§è¡Œã€‚è¿™ç§é‡æ’åºå’Œä¼˜åŒ–çš„è¡Œä¸ºå¯èƒ½å¯¼è‡´çº¿ç¨‹åœ¨è®¿é—®å…±äº«å˜é‡æ—¶çœ‹åˆ°çš„å€¼ä¸ä¸€è‡´ã€‚è€Œè°ƒç”¨System.out.printlnæ–¹æ³•æ—¶ï¼Œå®ƒæ¶‰åŠåˆ°å¯¹è¾“å‡ºæµçš„æ“ä½œï¼Œè€Œè¾“å‡ºæµé€šå¸¸æ¶‰åŠåº•å±‚çš„I/Oæ“ä½œï¼Œå¹¶ä¸”åœ¨è¾“å‡ºæµçš„æ“ä½œè¿‡ç¨‹ä¸­ä¼šæœ‰ä¸€å®šçš„åŒæ­¥æœºåˆ¶ã€‚è¿™äº›åŒæ­¥æœºåˆ¶ï¼ˆå¦‚åŠ é”ã€æ•°æ®çš„åˆ·æ–°ç­‰ï¼‰å¯ä»¥å¼ºåˆ¶å°†çº¿ç¨‹çš„æœ¬åœ°ç¼“å­˜ä¸­çš„æ•°æ®åˆ·æ–°å›ä¸»å†…å­˜ï¼Œä»è€Œä¿è¯äº†æœ€æ–°çš„å˜é‡å€¼è¢«è¾“å‡ºã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨System.out.printlnæ–¹æ³•æ—¶ï¼Œç”±äºè¾“å‡ºæµçš„åŒæ­¥æœºåˆ¶ï¼Œå®ƒä¼šå¼ºåˆ¶å°†çº¿ç¨‹çš„æœ¬åœ°ç¼“å­˜ä¸­çš„æ•°æ®åˆ·æ–°å›ä¸»å†…å­˜ï¼Œä»è€Œå¯ä»¥ç¡®ä¿è¯»å–åˆ°æœ€æ–°çš„å˜é‡å€¼ã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶åœ¨ä½¿ç”¨System.out.printlnæ—¶å¯ä»¥çœ‹åˆ°æœ€æ–°çš„å˜é‡å€¼ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€å®ƒæ˜¯ä¸€ç§å¯é çš„çº¿ç¨‹é—´é€šä¿¡æœºåˆ¶ã€‚è¦å®ç°çº¿ç¨‹é—´çš„å¯é é€šä¿¡ï¼Œéœ€è¦ä½¿ç”¨ä¸“é—¨çš„åŒæ­¥æœºåˆ¶ï¼ˆå¦‚synchronizedã€volatileã€Lockç­‰ï¼‰æ¥ä¿è¯æ•°æ®çš„å¯è§æ€§å’Œä¸€è‡´æ€§ã€‚</li></ol></blockquote> <hr> <h3 id="åç¼–è¯‘è§£è¯»å¯è§æ€§"><a href="#åç¼–è¯‘è§£è¯»å¯è§æ€§" class="header-anchor">#</a> åç¼–è¯‘è§£è¯»å¯è§æ€§</h3> <p>ç±»ä¼¼è¿™æ ·æœ‰æ·±åº¦çš„æŠ€æœ¯çŸ¥è¯†ï¼Œæœ€ä½³çš„æ–¹å¼å°±æ˜¯æ·±å…¥ç†è§£åŸç†ï¼Œçœ‹çœ‹å®ƒåˆ°åº•åšäº†ä»€ä¹ˆæ‰ä¿è¯çš„å†…å­˜å¯è§æ€§æ“ä½œã€‚</p> <h4 id="_1-æŸ¥çœ‹jvmæŒ‡ä»¤"><a href="#_1-æŸ¥çœ‹jvmæŒ‡ä»¤" class="header-anchor">#</a> 1. æŸ¥çœ‹JVMæŒ‡ä»¤</h4> <p>æŒ‡ä»¤ï¼š<code>javap -v -p VT</code></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token keyword">public</span> <span class="token keyword">volatile</span> <span class="token keyword">boolean</span> sign<span class="token punctuation">;</span>
    descriptor<span class="token operator">:</span> <span class="token class-name">Z</span>
    flags<span class="token operator">:</span> <span class="token constant">ACC_PUBLIC</span><span class="token punctuation">,</span> <span class="token constant">ACC_VOLATILE</span>

  org<span class="token punctuation">.</span>itstack<span class="token punctuation">.</span>interview<span class="token punctuation">.</span>test<span class="token punctuation">.</span><span class="token function">VT</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    descriptor<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token class-name">V</span>
    flags<span class="token operator">:</span>
    <span class="token class-name">Code</span><span class="token operator">:</span>
      stack<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> locals<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> args_size<span class="token operator">=</span><span class="token number">1</span>
         <span class="token number">0</span><span class="token operator">:</span> aload_0
         <span class="token number">1</span><span class="token operator">:</span> invokespecial #<span class="token number">1</span>                  <span class="token comment">// Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span>
         <span class="token number">4</span><span class="token operator">:</span> aload_0
         <span class="token number">5</span><span class="token operator">:</span> iconst_0
         <span class="token number">6</span><span class="token operator">:</span> putfield      #<span class="token number">2</span>                  <span class="token comment">// Field sign:Z</span>
         <span class="token number">9</span><span class="token operator">:</span> <span class="token keyword">return</span>
      <span class="token class-name">LineNumberTable</span><span class="token operator">:</span>
        line <span class="token number">35</span><span class="token operator">:</span> <span class="token number">0</span>
        line <span class="token number">37</span><span class="token operator">:</span> <span class="token number">4</span>
      <span class="token class-name">LocalVariableTable</span><span class="token operator">:</span>
        <span class="token class-name">Start</span>  <span class="token class-name">Length</span>  <span class="token class-name">Slot</span>  <span class="token class-name">Name</span>   <span class="token class-name">Signature</span>
            <span class="token number">0</span>      <span class="token number">10</span>     <span class="token number">0</span>  <span class="token keyword">this</span>   <span class="token class-name">Lorg</span><span class="token operator">/</span>itstack<span class="token operator">/</span>interview<span class="token operator">/</span>test<span class="token operator">/</span><span class="token constant">VT</span><span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    descriptor<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token class-name">V</span>
    flags<span class="token operator">:</span> <span class="token constant">ACC_PUBLIC</span>
    <span class="token class-name">Code</span><span class="token operator">:</span>
      stack<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> locals<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> args_size<span class="token operator">=</span><span class="token number">1</span>
         <span class="token number">0</span><span class="token operator">:</span> aload_0
         <span class="token number">1</span><span class="token operator">:</span> getfield      #<span class="token number">2</span>                  <span class="token comment">// Field sign:Z</span>
         <span class="token number">4</span><span class="token operator">:</span> ifne          <span class="token number">10</span>
         <span class="token number">7</span><span class="token operator">:</span> <span class="token keyword">goto</span>          <span class="token number">0</span>
        <span class="token number">10</span><span class="token operator">:</span> getstatic     #<span class="token number">3</span>                  <span class="token comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span>
        <span class="token number">13</span><span class="token operator">:</span> ldc           #<span class="token number">4</span>                  <span class="token comment">// String ä½ å</span>
        <span class="token number">15</span><span class="token operator">:</span> invokevirtual #<span class="token number">5</span>                  <span class="token comment">// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span>
        <span class="token number">18</span><span class="token operator">:</span> <span class="token keyword">return</span>
      <span class="token class-name">LineNumberTable</span><span class="token operator">:</span>
        line <span class="token number">40</span><span class="token operator">:</span> <span class="token number">0</span>
        line <span class="token number">42</span><span class="token operator">:</span> <span class="token number">10</span>
        line <span class="token number">43</span><span class="token operator">:</span> <span class="token number">18</span>
      <span class="token class-name">LocalVariableTable</span><span class="token operator">:</span>
        <span class="token class-name">Start</span>  <span class="token class-name">Length</span>  <span class="token class-name">Slot</span>  <span class="token class-name">Name</span>   <span class="token class-name">Signature</span>
            <span class="token number">0</span>      <span class="token number">19</span>     <span class="token number">0</span>  <span class="token keyword">this</span>   <span class="token class-name">Lorg</span><span class="token operator">/</span>itstack<span class="token operator">/</span>interview<span class="token operator">/</span>test<span class="token operator">/</span><span class="token constant">VT</span><span class="token punctuation">;</span>
      <span class="token class-name">StackMapTable</span><span class="token operator">:</span> number_of_entries <span class="token operator">=</span> <span class="token number">2</span>
        frame_type <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">/* same */</span>
        frame_type <span class="token operator">=</span> <span class="token number">9</span> <span class="token comment">/* same */</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><p>ä»JVMæŒ‡ä»¤ç ä¸­åªä¼šå‘ç°å¤šäº†ï¼Œ<code>ACC_VOLATILE</code>ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆå…¶ä»–çš„ç‚¹ã€‚æ‰€ä»¥ï¼Œä¹Ÿä¸èƒ½çœ‹å‡ºæ˜¯æ€ä¹ˆå®ç°çš„å¯è§æ€§ã€‚</p> <h4 id="_2-æŸ¥çœ‹æ±‡ç¼–æŒ‡ä»¤"><a href="#_2-æŸ¥çœ‹æ±‡ç¼–æŒ‡ä»¤" class="header-anchor">#</a> 2. æŸ¥çœ‹æ±‡ç¼–æŒ‡ä»¤</h4> <p>é€šè¿‡Classæ–‡ä»¶æŸ¥çœ‹æ±‡ç¼–ï¼Œéœ€è¦ä¸‹è½½ <code>hsdis-amd64.dll</code> æ–‡ä»¶ï¼Œå¤åˆ¶åˆ° <code>JAVA_HOME\jre\bin\server</code>ç›®å½•ä¸‹ã€‚ä¸‹è½½èµ„æºå¦‚ä¸‹ï¼š</p> <ul><li>http://vorboss.dl.sourceforge.net/project/fcml/fcml-1.1.1/hsdis-1.1.1-win32-amd64.zip(opens new window)</li> <li>http://vorboss.dl.sourceforge.net/project/fcml/fcml-1.1.1/hsdis-1.1.1-win32-i386.zip
å¦å¤–æ˜¯æ‰§è¡Œå‘½ä»¤ï¼ŒåŒ…æ‹¬ï¼š</li></ul> <ol><li>åŸºç¡€æŒ‡ä»¤ï¼š<code>java -Xcomp -XX:+UnlockDiagnosticVMOptions -XX:+PrintAssembly</code></li> <li>æŒ‡å®šæ‰“å°ï¼š<code>-XX:CompileCommand=dontinline,ç±»å.æ–¹æ³•å</code></li> <li>æŒ‡å®šæ‰“å°ï¼š<code>-XX:CompileCommand=compileonly,ç±»å.æ–¹æ³•å</code></li> <li>è¾“å‡ºä½ç½®ï¼š<code>&gt; xxx</code></li> <li>æœ€ç»ˆä½¿ç”¨ï¼š<code>java -Xcomp -XX:+UnlockDiagnosticVMOptions -XX:+PrintAssembly -XX:CompileCommand=dontinline,ApiTest.main -XX:CompileCommand=compileonly,ApiTest.mian</code></li></ol> <p>æŒ‡ä»¤å¯ä»¥åœ¨IDEAä¸­çš„ Terminal é‡Œä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åˆ° DOSé»‘çª—å£ä¸­ä½¿ç”¨
å¦å¤–ï¼Œä¸ºäº†æ›´ç®€å•çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬æŠŠæŒ‡ä»¤å¯ä»¥é…ç½®åˆ°ideaçš„<code>VM options</code> é‡Œï¼Œå¦‚ä¸‹å›¾ï¼š
<img src="/java/volatile/interview-14-05.png" alt="pic">
é…ç½®å®Œæˆåï¼Œä¸å‡ºæ„å¤–çš„è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Loaded</span> disassembler from <span class="token class-name">C</span><span class="token operator">:</span>\<span class="token class-name">Program</span> <span class="token class-name">Files</span>\<span class="token class-name">Java</span>\jdk1<span class="token punctuation">.</span><span class="token number">8.0_161</span>\jre\bin\server\hsdis<span class="token operator">-</span>amd64<span class="token punctuation">.</span>dll
<span class="token class-name">Decoding</span> compiled method <span class="token number">0x0000000003744990</span><span class="token operator">:</span>
<span class="token class-name">Code</span><span class="token operator">:</span>
<span class="token class-name">Argument</span> <span class="token number">0</span> is unknown<span class="token punctuation">.</span><span class="token constant">RIP</span><span class="token operator">:</span> <span class="token number">0x3744ae0</span> <span class="token class-name">Code</span> size<span class="token operator">:</span> <span class="token number">0x00000110</span>
<span class="token punctuation">[</span><span class="token class-name">Disassembling</span> <span class="token keyword">for</span> mach<span class="token operator">=</span><span class="token char">'amd64'</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token class-name">Entry</span> <span class="token class-name">Point</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token class-name">Constants</span><span class="token punctuation">]</span>
  # <span class="token punctuation">{</span>method<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token number">0x000000001c853d18</span><span class="token punctuation">}</span> 'getSnapshotTransformerList<span class="token char">' '</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token class-name">Lsun</span><span class="token operator">/</span>instrument<span class="token operator">/</span><span class="token class-name">TransformerManager</span>$<span class="token class-name">TransformerInfo</span><span class="token punctuation">;</span><span class="token char">' in '</span>sun<span class="token operator">/</span>instrument<span class="token operator">/</span><span class="token class-name">TransformerManager</span>'
  #           <span class="token punctuation">[</span>sp<span class="token operator">+</span><span class="token number">0x40</span><span class="token punctuation">]</span>  <span class="token punctuation">(</span>sp of caller<span class="token punctuation">)</span>
  <span class="token number">0x0000000003744ae0</span><span class="token operator">:</span> mov     r10d<span class="token punctuation">,</span>dword ptr <span class="token punctuation">[</span>rdx<span class="token operator">+</span><span class="token number">8</span>h<span class="token punctuation">]</span>
  <span class="token number">0x0000000003744ae4</span><span class="token operator">:</span> shl     r10<span class="token punctuation">,</span><span class="token number">3</span>h
  <span class="token number">0x0000000003744ae8</span><span class="token operator">:</span> cmp     r10<span class="token punctuation">,</span>rax
  <span class="token number">0x0000000003744aeb</span><span class="token operator">:</span> jne     <span class="token number">3685f</span><span class="token number">60</span>h          <span class="token punctuation">;</span>   <span class="token punctuation">{</span>runtime_call<span class="token punctuation">}</span>
  <span class="token number">0x0000000003744af1</span><span class="token operator">:</span> nop     word ptr <span class="token punctuation">[</span>rax<span class="token operator">+</span>rax<span class="token operator">+</span><span class="token number">0</span>h<span class="token punctuation">]</span>
  <span class="token number">0x0000000003744afc</span><span class="token operator">:</span> nop
<span class="token punctuation">[</span><span class="token class-name">Verified</span> <span class="token class-name">Entry</span> <span class="token class-name">Point</span><span class="token punctuation">]</span>
  <span class="token number">0x0000000003744b00</span><span class="token operator">:</span> mov     dword ptr <span class="token punctuation">[</span>rsp<span class="token operator">+</span><span class="token number">0f</span>fffffffffffa000h<span class="token punctuation">]</span><span class="token punctuation">,</span>eax
  <span class="token number">0x0000000003744b07</span><span class="token operator">:</span> push    rbp
  <span class="token number">0x0000000003744b08</span><span class="token operator">:</span> sub     rsp<span class="token punctuation">,</span><span class="token number">30</span>h           <span class="token punctuation">;</span><span class="token operator">*</span>aload_0
                                                <span class="token punctuation">;</span> <span class="token operator">-</span> <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>instrument<span class="token punctuation">.</span></span>TransformerManager</span><span class="token operator">::</span><span class="token function">getSnapshotTransformerList</span><span class="token annotation punctuation">@0</span> <span class="token punctuation">(</span>line <span class="token number">166</span><span class="token punctuation">)</span>

  <span class="token number">0x0000000003744b0c</span><span class="token operator">:</span> mov     eax<span class="token punctuation">,</span>dword ptr <span class="token punctuation">[</span>rdx<span class="token operator">+</span><span class="token number">10</span>h<span class="token punctuation">]</span>
  <span class="token number">0x0000000003744b0f</span><span class="token operator">:</span> shl     rax<span class="token punctuation">,</span><span class="token number">3</span>h            <span class="token punctuation">;</span><span class="token operator">*</span>getfield mTransformerList
                                                <span class="token punctuation">;</span> <span class="token operator">-</span> <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>instrument<span class="token punctuation">.</span></span>TransformerManager</span><span class="token operator">::</span><span class="token function">getSnapshotTransformerList</span><span class="token annotation punctuation">@1</span> <span class="token punctuation">(</span>line <span class="token number">166</span><span class="token punctuation">)</span>

  <span class="token number">0x0000000003744b13</span><span class="token operator">:</span> add     rsp<span class="token punctuation">,</span><span class="token number">30</span>h
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>è¿è¡Œç»“æœå°±æ˜¯æ±‡ç¼–æŒ‡ä»¤ï¼Œæ¯”è¾ƒå¤šè¿™é‡Œå°±ä¸éƒ½æ”¾äº†ã€‚æˆ‘ä»¬åªè§‚å¯ŸğŸ•µé‡ç‚¹éƒ¨åˆ†ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>   <span class="token number">0x0000000003324cda</span><span class="token operator">:</span> mov    <span class="token function">0x74</span><span class="token punctuation">(</span><span class="token operator">%</span>r8<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">%</span>edx     <span class="token punctuation">;</span><span class="token operator">*</span>getstatic state
                                                 <span class="token punctuation">;</span> <span class="token operator">-</span> <span class="token constant">VT</span><span class="token operator">::</span><span class="token function">run</span><span class="token annotation punctuation">@28</span> <span class="token punctuation">(</span>line <span class="token number">27</span><span class="token punctuation">)</span>
 
   <span class="token number">0x0000000003324cde</span><span class="token operator">:</span> inc    <span class="token operator">%</span>edx
   <span class="token number">0x0000000003324ce0</span><span class="token operator">:</span> mov    <span class="token operator">%</span>edx<span class="token punctuation">,</span><span class="token function">0x74</span><span class="token punctuation">(</span><span class="token operator">%</span>r8<span class="token punctuation">)</span>
   <span class="token number">0x0000000003324ce4</span><span class="token operator">:</span> lock addl $<span class="token number">0x0</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token operator">%</span>rsp<span class="token punctuation">)</span>     <span class="token punctuation">;</span><span class="token operator">*</span>putstatic state
                                                 <span class="token punctuation">;</span> <span class="token operator">-</span> <span class="token constant">VT</span><span class="token operator">::</span><span class="token function">run</span><span class="token annotation punctuation">@33</span> <span class="token punctuation">(</span>line <span class="token number">27</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ç¼–è¯‘åçš„æ±‡ç¼–æŒ‡ä»¤ä¸­ï¼Œæœ‰volatileå…³é”®å­—å’Œæ²¡æœ‰volatileå…³é”®å­—ï¼Œä¸»è¦å·®åˆ«åœ¨äºå¤šäº†ä¸€ä¸ª <code>lock addl $0x0,(%rsp)</code>ï¼Œä¹Ÿå°±æ˜¯lockçš„å‰ç¼€æŒ‡ä»¤ã€‚</p> <p><strong>lock</strong>æŒ‡ä»¤ç›¸å½“äºä¸€ä¸ªå†…å­˜å±éšœï¼Œå®ƒä¿è¯å¦‚ä¸‹ä¸‰ç‚¹ï¼š</p> <ol><li>å°†æœ¬å¤„ç†å™¨çš„ç¼“å­˜å†™å…¥å†…å­˜ã€‚</li> <li>é‡æ’åºæ—¶ä¸èƒ½æŠŠåé¢çš„æŒ‡ä»¤é‡æ’åºåˆ°å†…å­˜å±éšœä¹‹å‰çš„ä½ç½®ã€‚</li> <li>å¦‚æœæ˜¯å†™å…¥åŠ¨ä½œä¼šå¯¼è‡´å…¶ä»–å¤„ç†å™¨ä¸­å¯¹åº”çš„å†…å­˜æ— æ•ˆã€‚
é‚£ä¹ˆï¼Œè¿™é‡Œçš„1ã€3å°±æ˜¯ç”¨æ¥ä¿è¯è¢«ä¿®é¥°çš„å˜é‡ï¼Œä¿è¯å†…å­˜å¯è§æ€§ã€‚</li></ol> <hr> <h3 id="ä¸åŠ volatileä¹Ÿå¯è§å—"><a href="#ä¸åŠ volatileä¹Ÿå¯è§å—" class="header-anchor">#</a> ä¸åŠ volatileä¹Ÿå¯è§å—</h3> <p><strong><a href="#volatile%E6%80%8E%E4%B9%88%E4%BF%9D%E8%AF%81%E5%86%85%E5%AD%98%E5%8F%AF%E8%A7%81%E6%80%A7">çœ‹ä¸Šæ–¹çš„ç‰¹æ®Šæƒ…å†µ</a></strong></p> <h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="header-anchor">#</a> æ€»ç»“</h3> <ul><li>æœ€åæˆ‘ä»¬å†æ€»ç»“ä¸‹ volatileï¼Œå®ƒå‘¢ï¼Œä¼šæ§åˆ¶è¢«ä¿®é¥°çš„å˜é‡åœ¨å†…å­˜æ“ä½œä¸Šä¸»åŠ¨æŠŠå€¼åˆ·æ–°åˆ°ä¸»å†…å­˜ï¼ŒJVM ä¼šæŠŠè¯¥çº¿ç¨‹å¯¹åº”çš„CPUå†…å­˜è®¾ç½®è¿‡æœŸï¼Œä»ä¸»å†…å­˜ä¸­è¯»å–æœ€æ–°å€¼ã€‚</li> <li>é‚£ä¹ˆï¼Œvolatile å¦‚ä½•é˜²æ­¢æŒ‡ä»¤é‡æ’ä¹Ÿæ˜¯å†…å­˜å±éšœï¼Œvolatile çš„å†…å­˜å±æ•…éšœæ˜¯åœ¨è¯»å†™æ“ä½œçš„å‰åå„æ·»åŠ ä¸€ä¸ª StoreStoreå±éšœï¼Œä¹Ÿå°±æ˜¯å››ä¸ªä½ç½®ï¼Œæ¥ä¿è¯é‡æ’åºæ—¶ä¸èƒ½æŠŠå†…å­˜å±éšœåé¢çš„æŒ‡ä»¤é‡æ’åºåˆ°å†…å­˜å±éšœä¹‹å‰çš„ä½ç½®ã€‚</li> <li>å¦å¤– volatile å¹¶ä¸èƒ½è§£å†³åŸå­æ€§ï¼Œå¦‚æœéœ€è¦è§£å†³åŸå­æ€§é—®é¢˜ï¼Œéœ€è¦ä½¿ç”¨ synchronzied æˆ–è€… lockï¼Œè¿™éƒ¨åˆ†å†…å®¹åœ¨æˆ‘ä»¬åç»­ç« èŠ‚ä¸­ä»‹ç»ã€‚</li></ul> <h2 id="ç¦æ­¢æŒ‡ä»¤é‡æ’åº"><a href="#ç¦æ­¢æŒ‡ä»¤é‡æ’åº" class="header-anchor">#</a> ç¦æ­¢æŒ‡ä»¤é‡æ’åº</h2> <h3 id="æ¡ˆä¾‹-2"><a href="#æ¡ˆä¾‹-2" class="header-anchor">#</a> æ¡ˆä¾‹</h3> <p>æŒ‡ä»¤é‡æ’åºæ˜¯æŒ‡ç¼–è¯‘å™¨æˆ– CPU ä¸ºäº†ä¼˜åŒ–ç¨‹åºçš„æ‰§è¡Œæ€§èƒ½ï¼Œè€Œå¯¹æŒ‡ä»¤è¿›è¡Œé‡æ–°æ’åºçš„ä¸€ç§æ‰‹æ®µã€‚æŒ‡ä»¤é‡æ’åºçš„å®ç°åˆè¡·æ˜¯å¥½çš„ï¼Œä½†æ˜¯åœ¨å¤šçº¿ç¨‹æ‰§è¡Œä¸­ï¼Œå¦‚æœæ‰§è¡Œäº†æŒ‡ä»¤é‡æ’åºå¯èƒ½ä¼šå¯¼è‡´ç¨‹åºæ‰§è¡Œå‡ºé”™ã€‚æŒ‡ä»¤é‡æ’åºæœ€å…¸å‹çš„ä¸€ä¸ªé—®é¢˜å°±å‘ç”Ÿåœ¨å•ä¾‹æ¨¡å¼ä¸­ï¼Œæ¯”å¦‚ä»¥ä¸‹é—®é¢˜ä»£ç ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// â‘ </span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            	<span class="token keyword">if</span> <span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                	instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// â‘¡</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>ä»¥ä¸Šé—®é¢˜å‘ç”Ÿåœ¨ä»£ç  â‘¡ è¿™ä¸€è¡Œ<code>instance = new Singleton();</code>ï¼Œè¿™è¡Œä»£ç çœ‹ä¼¼åªæ˜¯ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹ï¼Œ<strong>ç„¶è€Œå®ƒçš„å®é™…æ‰§è¡Œå´åˆ†ä¸ºä»¥ä¸‹ 3 æ­¥</strong>ï¼š</p> <ol><li><strong>åˆ›å»ºå†…å­˜ç©ºé—´ã€‚</strong></li> <li><strong>åœ¨å†…å­˜ç©ºé—´ä¸­åˆå§‹åŒ–å¯¹è±¡ Singletonã€‚</strong></li> <li><strong>å°†å†…å­˜åœ°å€èµ‹å€¼ç»™ instance å¯¹è±¡ï¼ˆæ‰§è¡Œäº†æ­¤æ­¥éª¤ï¼Œinstance å°±ä¸ç­‰äº null äº†ï¼‰ã€‚</strong></li></ol> <p><strong>å¦‚æœæ­¤å˜é‡ä¸åŠ  volatileï¼Œé‚£ä¹ˆçº¿ç¨‹ 1 åœ¨æ‰§è¡Œåˆ°ä¸Šè¿°ä»£ç çš„ç¬¬ â‘¡ å¤„æ—¶å°±å¯èƒ½ä¼šæ‰§è¡ŒæŒ‡ä»¤é‡æ’åºï¼Œå°†åŸæœ¬æ˜¯ 1ã€2ã€3 çš„æ‰§è¡Œé¡ºåºï¼Œé‡æ’ä¸º 1ã€3ã€2ã€‚ä½†æ˜¯ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œçº¿ç¨‹ 1 åœ¨æ‰§è¡Œå®Œç¬¬ 3 æ­¥ä¹‹åï¼Œå¦‚æœæ¥äº†çº¿ç¨‹ 2 æ‰§è¡Œåˆ°ä¸Šè¿°ä»£ç çš„ç¬¬ â‘  å¤„ï¼Œåˆ¤æ–­ instance å¯¹è±¡å·²ç»ä¸ä¸º nullï¼Œä½†æ­¤æ—¶çº¿ç¨‹ 1 è¿˜æœªå°†å¯¹è±¡å®ä¾‹åŒ–å®Œï¼Œé‚£ä¹ˆçº¿ç¨‹ 2 å°†ä¼šå¾—åˆ°ä¸€ä¸ªè¢«å®ä¾‹åŒ–â€œä¸€åŠâ€çš„å¯¹è±¡ï¼Œä»è€Œå¯¼è‡´ç¨‹åºæ‰§è¡Œå‡ºé”™ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¦ç»™ç§æœ‰å˜é‡æ·»åŠ  volatile çš„åŸå› äº†ã€‚ è¦ä½¿ä»¥ä¸Šå•ä¾‹æ¨¡å¼å˜ä¸ºçº¿ç¨‹å®‰å…¨çš„ç¨‹åºï¼Œéœ€è¦ç»™ instance å˜é‡æ·»åŠ  volatile ä¿®é¥°</strong>ï¼Œå®ƒçš„æœ€ç»ˆå®ç°ä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token comment">// ä½¿ç”¨ volatile ç¦æ­¢æŒ‡ä»¤é‡æ’åº</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> <span class="token class-name">Singleton</span> instance <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// ã€ä¸»è¦æ˜¯æ­¤è¡Œä»£ç å‘ç”Ÿäº†å˜åŒ–ã€‘</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// â‘ </span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            	<span class="token keyword">if</span> <span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                	instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// â‘¡</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="æ€»ç»“-2"><a href="#æ€»ç»“-2" class="header-anchor">#</a> æ€»ç»“</h3> <p>volatile æ˜¯ Java å¹¶å‘ç¼–ç¨‹çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æœ‰ä¸¤ä¸ªï¼šä¿è¯å†…å­˜çš„å¯è§æ€§å’Œç¦æ­¢æŒ‡ä»¤é‡æ’åºã€‚volatile å¸¸ä½¿ç”¨åœ¨ä¸€å†™å¤šè¯»çš„åœºæ™¯ä¸­ï¼Œæ¯”å¦‚ CopyOnWriteArrayList é›†åˆï¼Œå®ƒåœ¨æ“ä½œçš„æ—¶å€™ä¼šæŠŠå…¨éƒ¨æ•°æ®å¤åˆ¶å‡ºæ¥å¯¹å†™æ“ä½œåŠ é”ï¼Œä¿®æ”¹å®Œä¹‹åå†ä½¿ç”¨ setArray æ–¹æ³•æŠŠæ­¤æ•°ç»„èµ‹å€¼ä¸ºæ›´æ–°åçš„å€¼ï¼Œä½¿ç”¨ volatile å¯ä»¥ä½¿è¯»çº¿ç¨‹å¾ˆå¿«çš„å‘ŠçŸ¥åˆ°æ•°ç»„è¢«ä¿®æ”¹ï¼Œä¸ä¼šè¿›è¡ŒæŒ‡ä»¤é‡æ’ï¼Œæ“ä½œå®Œæˆåå°±å¯ä»¥å¯¹å…¶ä»–çº¿ç¨‹å¯è§äº†ã€‚</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/2/2024, 5:53:23 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/java/proxy.html" class="prev">
        proxy
      </a></span> <span class="next"><a href="/java/synchronized.html">
        synchronized
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2bce7a50.js" defer></script><script src="/assets/js/2.d4767806.js" defer></script><script src="/assets/js/1.98e67d61.js" defer></script><script src="/assets/js/43.77fec41a.js" defer></script>
  </body>
</html>
